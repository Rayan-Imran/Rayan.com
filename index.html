<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Portfolio</title>
    <!-- Preconnect to external domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.cdnfonts.com" crossorigin>
    <!-- Preload critical images -->
    <link rel="preload" href="nebula.jpg" as="image">
    <!-- Load critical CSS first -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Comic Sans MS', 'Comic Sans', cursive, sans-serif;
            line-height: 1.6;
            color: #e0e0e0;
            background: #0a0a0a;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* Critical layout styles only */
        .content-area {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 40px;
            min-height: 500px;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Lazy loading styles */
        .lazy-media {
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        .lazy-media.loaded {
            opacity: 1;
        }
        
        /* Loading placeholder */
        .media-placeholder {
            background: #2a2a2a;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #7bb3ff;
            font-family: 'Orbitron', sans-serif;
            border: 1px dashed #4a9eff;
        }
        
        /* Make sure all regular text uses Comic Sans */
        p, li, span, div:not(.nav-tab):not(.skill-card h3):not(.project-card h3):not(.form-group label):not(.social-link) {
            font-family: 'Comic Sans MS', 'Comic Sans', cursive !important;
        }
    </style>
    <!-- Rest of your head content remains the same -->
    <!-- Defer non-critical CSS -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap"></noscript>
    <link rel="stylesheet" href="https://fonts.cdnfonts.com/css/cyberbold" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://fonts.cdnfonts.com/css/cyberbold"></noscript>
    <link rel="stylesheet" href="https://fonts.cdnfonts.com/css/robocode" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://fonts.cdnfonts.com/css/robocode"></noscript>
    
    <!-- Inline the rest of the CSS with media queries -->
    <style>
        /* All your other CSS styles remain exactly the same */
        .header {
            text-align: center;
            margin-bottom: 40px;
            color: #4a9eff;
        }

        .header h1 {
            font-family: 'Cyberbold', 'Orbitron', sans-serif;
            font-size: 3em;
            margin-bottom: 10px;
            font-weight: 900;
            letter-spacing: 3px;
            text-transform: uppercase;
        }

        /* ... rest of your CSS styles ... */

        @media (max-width: 768px) {
            .nav-tabs {
                flex-direction: column;
                align-items: center;
            }

            .nav-tab {
                width: 200px;
            }

            .header h1 {
                font-size: 2em;
            }

            .content-area {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Rayan.com</h1>
        </div>

        <div class="nav-container">
            <div class="nav-tabs">
                <button class="nav-tab active" onclick="showTab('home')">Home</button>
                <button class="nav-tab" onclick="showTab('vex')">VEX Robotics</button>
                <button class="nav-tab" onclick="showTab('projects')">Personal Projects</button>
                <button class="nav-tab" onclick="showTab('reffing')">Reffing</button>
                <button class="nav-tab" onclick="showTab('resume')">Resume</button>
                <button class="nav-tab" onclick="showTab('contact')">Contact Me</button>
            </div>

            <div class="content-area">
                <!-- Home Tab -->
                <div id="home" class="tab-content active">
                    <!-- ... your home tab content ... -->
                </div>

                <!-- VEX Robotics Tab -->
                <div id="vex" class="tab-content">
                    <h2 style="color: #4a9eff; font-weight: 700; margin-bottom: 20px; letter-spacing: 2px; text-transform: uppercase;">VEX Robotics Experience</h2>
                    <p style="color: #b0b0b0; font-weight: 400; letter-spacing: 0.5px;">Vex Robotics is one of the biggest High, middle, and elementary school in the world. Vex releases a game every year filled with challenges. Students design a robot to solve the problem and code it to perform tasks autonomously/manually through a driver</p>
                    
                    <div class="project-grid">
                        <!-- ... your project grid content ... -->
                    </div>
                    
                    <h3 style="color: #4a9eff; font-weight: 700; margin-top: 40px; margin-bottom: 20px; letter-spacing: 1px; text-transform: uppercase;">2024-2025 Season</h3>
                    
                    <p style="color: #b0b0b0; font-weight: 400; letter-spacing: 0.5px; text-align: center; margin-bottom: 20px; font-size: 1.1em;">7405N Millburn Robotics High Stakes</p>
                    
                    <div class="season-image">
                        <img class="lazy-media" data-src="nebula.jpg" alt="Millburn Nebula Team Robot - 2024-2025 Season" loading="lazy" />
                        <div class="media-placeholder" style="display: none;">Loading image...</div>
                    </div>
                    
                    <!-- Other season images with the same pattern -->
                    <h3 style="color: #4a9eff; font-weight: 700; margin-top: 40px; margin-bottom: 20px; letter-spacing: 1px; text-transform: uppercase;">2023-2024 Season</h3>
                    
                    <p style="color: #b0b0b0; font-weight: 400; letter-spacing: 0.5px; text-align: center; margin-bottom: 20px; font-size: 1.1em;">4610R Robot Revolution Over Under</p>
                    
                    <div class="season-image">
                        <img class="lazy-media" data-src="under.jpg" alt="Robot Revolution Team Robot - 2023-2024 Season Over Under" loading="lazy" />
                        <div class="media-placeholder" style="display: none;">Loading image...</div>
                    </div>
                    
                    <!-- Additional Images Section -->
                    <h4 style="color: #4a9eff; font-weight: 700; margin-top: 30px; margin-bottom: 20px; letter-spacing: 1px; text-transform: uppercase;">Additional Images</h4>
                    
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px;">
                        <div class="season-image">
                            <img class="lazy-media" data-src="IQ.jpg" alt="VEX IQ Competition" loading="lazy" />
                            <div class="media-placeholder" style="display: none;">Loading image...</div>
                        </div>
                        <div class="season-image">
                            <img class="lazy-media" data-src="sbhs.jpg" alt="SBHS Competition" loading="lazy" />
                            <div class="media-placeholder" style="display: none;">Loading image...</div>
                        </div>
                    </div>
                    
                    <!-- ... rest of your VEX tab content ... -->
                </div>

                <!-- Personal Projects Tab -->
                <div id="projects" class="tab-content">
                    <h2 style="color: #4a9eff; font-weight: 700; margin-bottom: 20px; letter-spacing: 2px; text-transform: uppercase;">Personal Projects</h2>
                    <p style="color: #b0b0b0; font-weight: 400; letter-spacing: 0.5px;">Here are some of the projects I've worked on outside of school and competitions.</p>
                    
                    <!-- Lazy Switch Project -->
                    <div class="project-grid">
                        <div class="project-card">
                            <h3>The Lazy Switch</h3>
                            <p>For those who are too lazy to get out of bed to turn on your lights I introduce the Lazy Switch switch your lights on in the comfort of your bed</p>
                            <p><strong>Status:</strong> Complete</p>
                            
                            <div class="season-image" style="margin-top: 20px;">
                                <video class="lazy-media" controls preload="none" style="width: 80%; max-width: 600px; height: auto; aspect-ratio: 16/9; border-radius: 8px; border: 2px solid #4a9eff; box-shadow: 0 4px 15px rgba(74, 158, 255, 0.3);">
                                    <source data-src="lazy.mp4" type="video/mp4">
                                    Your browser does not support the video tag.
                                </video>
                                <div class="media-placeholder" style="display: none;">Loading video...</div>
                            </div>
                            
                            <div class="season-image" style="margin-top: 15px;">
                                <img class="lazy-media" data-src="lazydiagram.jpg" alt="The Lazy Switch Diagram" loading="lazy" />
                                <div class="media-placeholder" style="display: none;">Loading image...</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ... rest of your projects tab content ... -->
                </div>

                <!-- ... rest of your HTML remains the same ... -->
            </div>
        </div>
    </div>

    <script>
        // Enhanced media loading functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize tab system
            function showTab(tabName) {
                const tabContents = document.querySelectorAll('.tab-content');
                tabContents.forEach(content => {
                    content.classList.remove('active');
                });
                
                const tabs = document.querySelectorAll('.nav-tab');
                tabs.forEach(tab => {
                    tab.classList.remove('active');
                });
                
                document.getElementById(tabName).classList.add('active');
                event.target.classList.add('active');
                
                // Load media for the active tab
                loadVisibleMedia();
            }

            // Improved lazy loading with Intersection Observer
            function loadVisibleMedia() {
                const activeTab = document.querySelector('.tab-content.active');
                if (!activeTab) return;
                
                const lazyMedia = activeTab.querySelectorAll('.lazy-media');
                
                lazyMedia.forEach(media => {
                    // Show placeholder while loading
                    const placeholder = media.nextElementSibling;
                    if (placeholder && placeholder.classList.contains('media-placeholder')) {
                        placeholder.style.display = 'flex';
                    }
                    
                    if (media.tagName === 'IMG') {
                        const src = media.getAttribute('data-src');
                        if (src) {
                            const img = new Image();
                            img.src = src;
                            img.onload = function() {
                                media.src = src;
                                media.classList.add('loaded');
                                if (placeholder) placeholder.style.display = 'none';
                            };
                            img.onerror = function() {
                                if (placeholder) {
                                    placeholder.textContent = 'Image failed to load';
                                    placeholder.style.color = '#ff4a4a';
                                }
                            };
                        }
                    } else if (media.tagName === 'VIDEO') {
                        const source = media.querySelector('source[data-src]');
                        if (source) {
                            const src = source.getAttribute('data-src');
                            source.src = src;
                            media.load();
                            media.classList.add('loaded');
                            if (placeholder) placeholder.style.display = 'none';
                            
                            media.onerror = function() {
                                if (placeholder) {
                                    placeholder.textContent = 'Video failed to load';
                                    placeholder.style.color = '#ff4a4a';
                                }
                            };
                        }
                    }
                });
            }

            // Set up Intersection Observer for lazy loading
            if ('IntersectionObserver' in window) {
                const lazyObserver = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const media = entry.target;
                            
                            // Show placeholder
                            const placeholder = media.nextElementSibling;
                            if (placeholder && placeholder.classList.contains('media-placeholder')) {
                                placeholder.style.display = 'flex';
                            }
                            
                            if (media.tagName === 'IMG') {
                                const src = media.getAttribute('data-src');
                                if (src) {
                                    media.src = src;
                                    media.onload = function() {
                                        media.classList.add('loaded');
                                        if (placeholder) placeholder.style.display = 'none';
                                    };
                                    media.onerror = function() {
                                        if (placeholder) {
                                            placeholder.textContent = 'Image failed to load';
                                            placeholder.style.color = '#ff4a4a';
                                        }
                                    };
                                }
                            } else if (media.tagName === 'VIDEO') {
                                const source = media.querySelector('source[data-src]');
                                if (source) {
                                    source.src = source.getAttribute('data-src');
                                    media.load();
                                    media.classList.add('loaded');
                                    if (placeholder) placeholder.style.display = 'none';
                                }
                            }
                            lazyObserver.unobserve(media);
                        }
                    });
                }, {
                    rootMargin: '200px',
                    threshold: 0.1
                });

                document.querySelectorAll('.lazy-media').forEach(media => {
                    lazyObserver.observe(media);
                });
            } else {
                // Fallback for browsers without IntersectionObserver
                window.addEventListener('load', function() {
                    document.querySelectorAll('.lazy-media').forEach(media => {
                        const placeholder = media.nextElementSibling;
                        if (placeholder && placeholder.classList.contains('media-placeholder')) {
                            placeholder.style.display = 'flex';
                        }
                        
                        if (media.tagName === 'IMG') {
                            const src = media.getAttribute('data-src');
                            if (src) {
                                media.src = src;
                                media.onload = function() {
                                    media.classList.add('loaded');
                                    if (placeholder) placeholder.style.display = 'none';
                                };
                            }
                        } else if (media.tagName === 'VIDEO') {
                            const source = media.querySelector('source[data-src]');
                            if (source) {
                                source.src = source.getAttribute('data-src');
                                media.load();
                                media.classList.add('loaded');
                                if (placeholder) placeholder.style.display = 'none';
                            }
                        }
                    });
                });
            }

            // Load initial tab media
            loadVisibleMedia();
        });
    </script>
</body>
</html>
